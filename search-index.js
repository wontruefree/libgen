crystal_doc_search_index_callback({"repository_name":"github.com/olbat/libgen","body":"# Crystal lib generator [![Build Status](https://secure.travis-ci.org/olbat/libgen.png?branch=master)](https://travis-ci.org/olbat/libgen)\n\nLibgen is a small tool based on the [crystal_lib](https://github.com/crystal-lang/crystal_lib) project that allows to generate [libs](https://crystal-lang.org/docs/syntax_and_semantics/c_bindings/lib.html) following rules specified in config files.\n\n\n## Overview\nThis project aims to ease the port of big C libraries and to provide a convinient way to define re-generable bindings.  \nLib generation is parametrized using a YAML or JSON configuration file (_how to generate_).  \nBindings definitions are specified in YAML, JSON or Crystal files or in the generation config file directly (_what to generate_).  \nIt's possible to split lib's definitions in several files in order to make the binding more readable/easy to maintain.  \nThere is also an option to perform AST node renaming at generation time.\n\n\n## Installation\n__Debian/Ubuntu__\n```bash\n# install build dependencies\napt-get install -y build-essential llvm-4.0-dev libclang-4.0-dev\n# then, build and install\nmake && make install\n```\n\n__macOS__\n```bash\n# if necessary, install build dependencies\nbrew install llvm@4.0\n# then, build and install\nmake && make install\n```\n\n\n## Usage\n```bash\nusage: libgen [<lib_desc_file>]\n```\n\n\n## Example\nA generation config file, [examples/icu/lib.yml](https://github.com/olbat/libgen/blob/master/examples/icu/lib.yml):\n```yaml\nname: LibICU\ncflags: \"-DU_COMMON_IMPLEMENTATION\"\nldflags: \"-licuuc -licudata -licui18n -licuio\"\npackages: \"icu-uc icu-i18n icu-io\"\ndestdir: src/lib_icu/\nincludes:\n- include/*.yml\n- include/*.json\n- include/*.cr\ndefinitions:\n  ubrk:\n    description: Text Boundary Analysis (Break Iteration)\n    includes: [ unicode/ubrk.h ]\n    prefixes: [ ubrk_ ]\nrename:\n  rules:\n    \"*\":\n    - pattern: _\\d+$\n      replacement: \"\"\n```\n\nA definition file, [examples/icu/include/ucsdet.yml](https://github.com/olbat/libgen/blob/master/examples/icu/include/ucsdet.yml):\n```yaml\ndescription: Charset detection\nincludes:\n- unicode/ucsdet.h\nprefixes:\n- ucsdet_\n```\n\nGeneration of the lib:\n```bash\n$ libgen examples/icu/lib.yml\nloading library from examples/icu/lib.yml\nmoving to examples/icu/\nloading ubrk definition from lib.yml\nloading lib_icu definition from include/lib_icu.yml\nloading ucsdet definition from include/ucsdet.yml\nloading ucurr definition from include/ucurr.json\nloading udat definition from include/udat.cr\ngenerate src/lib_icu/ubrk.cr\ngenerate src/lib_icu/lib_icu.cr\ngenerate src/lib_icu/ucsdet.cr\ngenerate src/lib_icu/ucurr.cr\ngenerate src/lib_icu/udat.cr\n\n# or, using docker-compose\n$ docker-compose run --rm -u $UID libgen examples/icu/lib.yml\n```\n\nThe generated files: [examples/icu/src/lib_icu](https://github.com/olbat/libgen/blob/master/examples/icu/src/lib_icu).\n\n\n## Specifications\n\nSee [SPECS.md](https://github.com/olbat/libgen/blob/master/SPECS.md)\n\n\n## Development\n__How does it work__\n\nTo generate Crystal libs from C headers, the `libgen` tool:\n1. loads [Library](https://github.com/olbat/libgen/blob/master/src/lib_generator/library.cr) and [Definition](https://github.com/olbat/libgen/blob/master/src/lib_generator/definition.cr) objects from configuration files\n2. generates Crystal ASTs (one per Definition) from C headers using [crystal_lib](https://github.com/olbat/libgen/blob/master/https://github.com/crystal-lang/crystal_lib)'s parser (see [Definition#parse_lib](https://github.com/olbat/libgen/blob/master/src/lib_generator/definition.cr))\n3. transforms the Crystal ASTs:\n    1. applies transformers following the configuration (AST nodes renaming, sorting, ... see [transformers](https://github.com/olbat/libgen/blob/master/src/lib_generator/transformers))\n    2. groups AST nodes that are common to several libs into a common lib\n    3. adds requires to non-empty libs in the common lib's AST\n4. generates and formats the libs from ASTs adding the _@Link/ldflags_ attribute (see [Generator::Lib#generate](https://github.com/olbat/libgen/blob/master/src/lib_generator/generator/lib.cr))\n5. saves the generated libs to their respective output files\n\n__Known limitations__\n* it's only possible to filter functions to bind by prefix (and not by name, such as in [example](https://github.com/crystal-lang/crystal_lib/blob/master/examples/lib_readline.cr))\n* it's not possible to specify the `description` field in definitions written in Crystal\n* the `description` field specified in definitions is not used ATM (it should be added as a comment in the generated bindings)\n\n__LLVM versions__\n\nLibgen is [tested](.travis.yml) using the versions of LLVM that are [currently supported](https://crystal-lang.org/docs/installation/from_source_repository.html) by Crystal: LLVM `3.8`â†’`6.0`.\n\nThe tool is not dependent on this versions of LLVM, it may be working with other versions as well but it's not tested/guaranteed.\n\n__Launch the tests__\n```\nmake test\n\n# or, using docker-compose\ndocker-compose run --rm -u $UID devel make test\n```\n\n__Build the Docker image__\n```bash\nmake\ndocker build .\n```\n\n\n## Projects using libgen\n- [icu.cr](https://github.com/olbat/icu.cr)\n\n__Note__: you are using _libgen_ in your project and want to link it here, please [submit a PR](contributing)\n\n\n## Contributing\n1. Fork it ( https://github.com/olbat/libgen/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Commit your changes (git commit -am 'Add some feature')\n4. Push to the branch (git push origin my-new-feature)\n5. Create a new Pull Request\n\n\n## Contributors\n- [olbat](https://github.com/olbat) - creator, maintainer\n","program":{"html_id":"github.com/olbat/libgen/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/olbat/libgen","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/olbat/libgen/LibGenerator","path":"LibGenerator.html","kind":"module","full_name":"LibGenerator","name":"LibGenerator","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"lib_generator/definition.cr","line_number":6,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/definition.cr"},{"filename":"lib_generator/version.cr","line_number":1,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/version.cr"},{"filename":"lib_generator.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.2.5\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"run-class-method","html_id":"run-class-method","name":"run","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator.cr#L4","def":{"name":"run","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if ARGV.size > 1 || (ARGV[0]? == \"-h\")\n  abort(\"usage: #{PROGRAM_NAME} [<lib_desc_file>]\")\nend\nlib_file = ARGV[0]? || \"lib.yml\"\nif File.readable?(lib_file)\nelse\n  abort(\"Error: cannot read #{lib_file}\")\nend\nputs(\"loading library from #{lib_file}\")\nlibrary = nil\nbegin\n  case (  extname = File.extname(lib_file))\n  when \".yml\", \".yaml\"\n    library = LibGenerator::Library.from_yaml(File.read(lib_file))\n  when \".json\"\n    library = LibGenerator::Library.from_json(File.read(lib_file))\n  else\n    abort(\"Error: #{lib_file} unsupported file format #{extname}\")\n  end\nrescue ex : YAML::ParseException | JSON::ParseException | ArgumentError\n  abort(\"Error: invalid library format #{lib_file} (#{ex.message})\")\nend\nif library\nelse\n  abort(\"Error: invalid library description\")\nend\nlib_dir = File.dirname(lib_file)\nif (lib_dir != \".\") && (lib_dir != Dir.current)\n  puts(\"moving to #{lib_dir}/\")\n  Dir.cd(lib_dir)\nend\ndefinitions = {} of String => LibGenerator::Definition\nlibrary.definitions.try do |ds|\n  ds.each do |basename, definition|\n    puts(\"loading #{basename} definition from #{File.basename(lib_file)}\")\n    definitions[\"#{basename}.cr\"] = definition\n  end\nend\nif (includes = library.includes)\n  if includes.empty?\n    abort(\"Error: no file to include\")\n  end\n  inc_files = Dir[includes]\n  if inc_files.empty?\n    abort(\"Error: file not found #{includes.join(\", \")}\")\n  end\n  inc_files.each do |filepath|\n    if File.readable?(filepath)\n    else\n      abort(\"Error: cannot read #{filepath}\")\n    end\n    extname = File.extname(filepath)\n    basename = File.basename(filepath, extname)\n    filename = \"#{basename}.cr\"\n    puts(\"loading #{basename} definition from #{filepath}\")\n    begin\n      case extname\n      when \".yml\", \".yaml\"\n        definition = LibGenerator::Definition.from_yaml(File.read(filepath))\n      when \".json\"\n        definition = LibGenerator::Definition.from_json(File.read(filepath))\n      when \".cr\"\n        definition = LibGenerator::Definition.from_crystal(File.read(filepath))\n      else\n        abort(\"Error: #{filepath} unsupported file format #{extname}\")\n      end\n    rescue ex : YAML::ParseException | JSON::ParseException | ArgumentError\n      abort(\"Error: #{filepath} invalid definition format (#{ex.message})\")\n    end\n    if definitions[filename]?\n      abort(\"Error: #{filename} has already been defined in #{lib_file}\")\n    end\n    definitions[filename] = definition\n  end\nend\ntransformers = [] of Crystal::Transformer\ntransformers << LibGenerator::SortTransformer.new\nlibrary.rename.try do |t|\n  transformers << t\nend\nbegin\n  sources = LibGenerator::Generator.generate(library: library, definitions: definitions, transformers: transformers)\nrescue ex : ArgumentError\n  abort(\"Error: #{ex.message}\")\nend\ndestdir = library.destdir\nif Dir.exists?(destdir)\nelse\n  Dir.mkdir_p(destdir, mode = 493)\nend\nsources.each do |filename, source|\n  filepath = File.join(destdir, filename)\n  if source\n    puts(\"generate #{filepath}\")\n    File.open(filepath, \"w\") do |io|\n      io.puts(source)\n    end\n  else\n    puts(\"skip empty file #{filepath}\")\n  end\nend\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/olbat/libgen/LibGenerator/CosmeticTransformer","path":"LibGenerator/CosmeticTransformer.html","kind":"class","full_name":"LibGenerator::CosmeticTransformer","name":"CosmeticTransformer","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},"ancestors":[{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/transformers/cosmetic.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/cosmetic.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"github.com/olbat/libgen/LibGenerator/SortTransformer","kind":"class","full_name":"LibGenerator::SortTransformer","name":"SortTransformer"}],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":"englobing class for transformers that does not perform semantic modifications\n(re-ordering nodes, formating, etc ...)","summary":"<p>englobing class for transformers that does not perform semantic modifications (re-ordering nodes, formating, etc ...)</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/CountVisitor","path":"LibGenerator/CountVisitor.html","kind":"class","full_name":"LibGenerator::CountVisitor","name":"CountVisitor","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Crystal/Visitor","kind":"class","full_name":"Crystal::Visitor","name":"Visitor"},"ancestors":[{"html_id":"github.com/olbat/libgen/Crystal/Visitor","kind":"class","full_name":"Crystal::Visitor","name":"Visitor"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/visitors/count.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/count.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(counter:NodeCounter)-class-method","html_id":"new(counter:NodeCounter)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"counter","doc":null,"default_value":"","external_name":"counter","restriction":"NodeCounter"}],"args_string":"(counter : NodeCounter)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/count.cr#L4","def":{"name":"new","args":[{"name":"counter","doc":null,"default_value":"","external_name":"counter","restriction":"NodeCounter"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(counter)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"visit(node:Crystal::FunDef|Crystal::TypeDef|Crystal::CStructOrUnionDef|Crystal::EnumDef|Crystal::Alias|Crystal::ExternalVar|Crystal::Assign)-instance-method","html_id":"visit(node:Crystal::FunDef|Crystal::TypeDef|Crystal::CStructOrUnionDef|Crystal::EnumDef|Crystal::Alias|Crystal::ExternalVar|Crystal::Assign)-instance-method","name":"visit","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::EnumDef | Crystal::Alias | Crystal::ExternalVar | Crystal::Assign"}],"args_string":"(node : Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::EnumDef | Crystal::Alias | Crystal::ExternalVar | Crystal::Assign)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/count.cr#L7","def":{"name":"visit","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::EnumDef | Crystal::Alias | Crystal::ExternalVar | Crystal::Assign"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@counter.inc(node)\nfalse\n"}},{"id":"visit(node)-instance-method","html_id":"visit(node)-instance-method","name":"visit","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":""}],"args_string":"(node)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/count.cr#L12","def":{"name":"visit","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"true"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/CrystalLibTransformer","path":"LibGenerator/CrystalLibTransformer.html","kind":"class","full_name":"LibGenerator::CrystalLibTransformer","name":"CrystalLibTransformer","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/CrystalLib/LibTransformer","kind":"class","full_name":"CrystalLib::LibTransformer","name":"LibTransformer"},"ancestors":[{"html_id":"github.com/olbat/libgen/CrystalLib/LibTransformer","kind":"class","full_name":"CrystalLib::LibTransformer","name":"LibTransformer"},{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/transformers/crystal_lib.cr","line_number":4,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/crystal_lib.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/crystal_lib.cr#L9","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"flags:Array(String)-instance-method","html_id":"flags:Array(String)-instance-method","name":"flags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/crystal_lib.cr#L8","def":{"name":"flags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@flags"}},{"id":"headers:Array(String)-instance-method","html_id":"headers:Array(String)-instance-method","name":"headers","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/crystal_lib.cr#L7","def":{"name":"headers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@headers"}},{"id":"prefixes:Array(String)-instance-method","html_id":"prefixes:Array(String)-instance-method","name":"prefixes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/crystal_lib.cr#L9","def":{"name":"prefixes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@prefixes"}},{"id":"transform(node:Crystal::LibDef)-instance-method","html_id":"transform(node:Crystal::LibDef)-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::LibDef"}],"args_string":"(node : Crystal::LibDef)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/crystal_lib.cr#L16","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::LibDef"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"headers, @flags, @prefixes, _ = process_includes\n@headers = (headers.scan(/<(.+)>/)).flatten.map(&.[](1))\nnode\n"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/Definition","path":"LibGenerator/Definition.html","kind":"class","full_name":"LibGenerator::Definition","name":"Definition","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/definition.cr","line_number":6,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/definition.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[{"id":"from_crystal(source:String)-class-method","html_id":"from_crystal(source:String)-class-method","name":"from_crystal","doc":null,"summary":null,"abstract":false,"args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"String"}],"args_string":"(source : String)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/definition.cr#L21","def":{"name":"from_crystal","args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"ltr = LibGenerator::CrystalLibTransformer.new\n(Crystal::Parser.parse(source)).transform(ltr)\nnew(ltr.prefixes, ltr.headers)\n"}}],"constructors":[{"id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node,_dummy:Nil)-class-method","html_id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node,_dummy:Nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"::YAML::Nodes::Node"},{"name":"_dummy","doc":null,"default_value":"","external_name":"_dummy","restriction":"Nil"}],"args_string":"(ctx : YAML::ParseContext, node : YAML::Nodes::Node, _dummy : Nil)","source_link":null,"def":{"name":"new","args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"::YAML::Nodes::Node"},{"name":"_dummy","doc":null,"default_value":"","external_name":"_dummy","restriction":"Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(ctx, node, _dummy)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node)-class-method","html_id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"YAML::Nodes::Node"}],"args_string":"(ctx : YAML::ParseContext, node : YAML::Nodes::Node)","source_link":null,"def":{"name":"new","args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"YAML::Nodes::Node"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"ctx.read_alias(node, {{ @type }}) do |obj|\n  return obj\nend\ninstance = allocate\nctx.record_anchor(node, instance)\ninstance.initialize(ctx, node, nil)\nif instance.responds_to?(:finalize)\n  GC.add_finalizer(instance)\nend\ninstance\n"}},{"id":"new(__temp_55:JSON::PullParser)-class-method","html_id":"new(__temp_55:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"__temp_55","doc":null,"default_value":"","external_name":"__temp_55","restriction":"::JSON::PullParser"}],"args_string":"(__temp_55 : JSON::PullParser)","source_link":null,"def":{"name":"new","args":[{"name":"__temp_55","doc":null,"default_value":"","external_name":"__temp_55","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(__temp_55)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(prefixes=[]ofString,includes=[]ofString,description=nil)-class-method","html_id":"new(prefixes=[]ofString,includes=[]ofString,description=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefixes","doc":null,"default_value":"[] of String","external_name":"prefixes","restriction":""},{"name":"includes","doc":null,"default_value":"[] of String","external_name":"includes","restriction":""},{"name":"description","doc":null,"default_value":"nil","external_name":"description","restriction":""}],"args_string":"(prefixes = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, includes = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, description = <span class=\"n\">nil</span>)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/definition.cr#L28","def":{"name":"new","args":[{"name":"prefixes","doc":null,"default_value":"[] of String","external_name":"prefixes","restriction":""},{"name":"includes","doc":null,"default_value":"[] of String","external_name":"includes","restriction":""},{"name":"description","doc":null,"default_value":"nil","external_name":"description","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(prefixes, includes, description)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"description:String?-instance-method","html_id":"description:String?-instance-method","name":"description","doc":"generator","summary":"<p>generator</p>","abstract":false,"args":[],"args_string":" : String?","source_link":null,"def":{"name":"description","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@description"}},{"id":"description=(_description:String?)-instance-method","html_id":"description=(_description:String?)-instance-method","name":"description=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_description","doc":null,"default_value":"","external_name":"_description","restriction":"String | ::Nil"}],"args_string":"(_description : String?)","source_link":null,"def":{"name":"description=","args":[{"name":"_description","doc":null,"default_value":"","external_name":"_description","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@description = _description"}},{"id":"includes:Array(String)-instance-method","html_id":"includes:Array(String)-instance-method","name":"includes","doc":"crystal_lib","summary":"<p>crystal_lib</p>","abstract":false,"args":[],"args_string":" : Array(String)","source_link":null,"def":{"name":"includes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@includes"}},{"id":"includes=(_includes:Array(String))-instance-method","html_id":"includes=(_includes:Array(String))-instance-method","name":"includes=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_includes","doc":null,"default_value":"","external_name":"_includes","restriction":"Array(String)"}],"args_string":"(_includes : Array(String))","source_link":null,"def":{"name":"includes=","args":[{"name":"_includes","doc":null,"default_value":"","external_name":"_includes","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@includes = _includes"}},{"id":"parse_lib(cflags:Array(String)?=[]ofString):Crystal::ASTNode-instance-method","html_id":"parse_lib(cflags:Array(String)?=[]ofString):Crystal::ASTNode-instance-method","name":"parse_lib","doc":null,"summary":null,"abstract":false,"args":[{"name":"cflags","doc":null,"default_value":"[] of String","external_name":"cflags","restriction":"Array(String) | ::Nil"}],"args_string":"(cflags : Array(String)? = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>) : Crystal::ASTNode","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/definition.cr#L31","def":{"name":"parse_lib","args":[{"name":"cflags","doc":null,"default_value":"[] of String","external_name":"cflags","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystal::ASTNode","visibility":"Public","body":"includes = @includes.not_nil!\nprefixes = @prefixes.not_nil!\nif includes.empty?\n  raise(ArgumentError.new(\"@includes should not be empty\"))\nend\nif prefixes.empty?\n  raise(ArgumentError.new(\"@prefixes should not be empty\"))\nend\nc_includes = includes.map do |i|\n  \"#include <#{i}>\"\nend.join(\"\\n\")\nnodes = CrystalLib::Parser.parse(c_includes, cflags || ([] of String))\nprefix_matcher = CrystalLib::PrefixMatcher.new(prefixes, false)\n(CrystalLib::PrefixImporter.import(nodes, prefix_matcher)).tap do |ast|\n  if ast.is_a?(Crystal::Nop)\n    raise(ArgumentError.new(\"Nothing to import from #{includes.join(\", \")} #{@description.try do |d|\n      \"(#{d})\"\n    end}\"))\n  end\nend\n"}},{"id":"parse_lib(cflags:String):Crystal::ASTNode-instance-method","html_id":"parse_lib(cflags:String):Crystal::ASTNode-instance-method","name":"parse_lib","doc":null,"summary":null,"abstract":false,"args":[{"name":"cflags","doc":null,"default_value":"","external_name":"cflags","restriction":"String"}],"args_string":"(cflags : String) : Crystal::ASTNode","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/definition.cr#L50","def":{"name":"parse_lib","args":[{"name":"cflags","doc":null,"default_value":"","external_name":"cflags","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystal::ASTNode","visibility":"Public","body":"parse_lib(cflags.split(/\\s+/))"}},{"id":"prefixes:Array(String)-instance-method","html_id":"prefixes:Array(String)-instance-method","name":"prefixes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":null,"def":{"name":"prefixes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@prefixes"}},{"id":"prefixes=(_prefixes:Array(String))-instance-method","html_id":"prefixes=(_prefixes:Array(String))-instance-method","name":"prefixes=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_prefixes","doc":null,"default_value":"","external_name":"_prefixes","restriction":"Array(String)"}],"args_string":"(_prefixes : Array(String))","source_link":null,"def":{"name":"prefixes=","args":[{"name":"_prefixes","doc":null,"default_value":"","external_name":"_prefixes","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@prefixes = _prefixes"}},{"id":"to_json(json:JSON::Builder)-instance-method","html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"args_string":"(json : JSON::Builder)","source_link":null,"def":{"name":"to_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"json.object do\n  _includes = @includes\n  if _includes.nil?\n  else\n    json.field(\"includes\") do\n      _includes.to_json(json)\n    end\n  end\n  _prefixes = @prefixes\n  if _prefixes.nil?\n  else\n    json.field(\"prefixes\") do\n      _prefixes.to_json(json)\n    end\n  end\n  _description = @description\n  if _description.nil?\n  else\n    json.field(\"description\") do\n      _description.to_json(json)\n    end\n  end\nend"}},{"id":"to_yaml(__temp_54:YAML::Nodes::Builder)-instance-method","html_id":"to_yaml(__temp_54:YAML::Nodes::Builder)-instance-method","name":"to_yaml","doc":null,"summary":null,"abstract":false,"args":[{"name":"__temp_54","doc":null,"default_value":"","external_name":"__temp_54","restriction":"::YAML::Nodes::Builder"}],"args_string":"(__temp_54 : YAML::Nodes::Builder)","source_link":null,"def":{"name":"to_yaml","args":[{"name":"__temp_54","doc":null,"default_value":"","external_name":"__temp_54","restriction":"::YAML::Nodes::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_54.mapping(reference: self) do\n  _includes = @includes\n  if _includes.nil?\n  else\n    \"includes\".to_yaml(__temp_54)\n    _includes.to_yaml(__temp_54)\n  end\n  _prefixes = @prefixes\n  if _prefixes.nil?\n  else\n    \"prefixes\".to_yaml(__temp_54)\n    _prefixes.to_yaml(__temp_54)\n  end\n  _description = @description\n  if _description.nil?\n  else\n    \"description\".to_yaml(__temp_54)\n    _description.to_yaml(__temp_54)\n  end\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/DuplicatesVisitor","path":"LibGenerator/DuplicatesVisitor.html","kind":"class","full_name":"LibGenerator::DuplicatesVisitor","name":"DuplicatesVisitor","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Crystal/Visitor","kind":"class","full_name":"Crystal::Visitor","name":"Visitor"},"ancestors":[{"html_id":"github.com/olbat/libgen/Crystal/Visitor","kind":"class","full_name":"Crystal::Visitor","name":"Visitor"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/visitors/duplicates.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/duplicates.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(nodes:Array(Crystal::ASTNode))-class-method","html_id":"new(nodes:Array(Crystal::ASTNode))-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"nodes","doc":null,"default_value":"","external_name":"nodes","restriction":"Array(Crystal::ASTNode)"}],"args_string":"(nodes : Array(Crystal::ASTNode))","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/duplicates.cr#L4","def":{"name":"new","args":[{"name":"nodes","doc":null,"default_value":"","external_name":"nodes","restriction":"Array(Crystal::ASTNode)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(nodes)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"visit(node)-instance-method","html_id":"visit(node)-instance-method","name":"visit","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":""}],"args_string":"(node)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/visitors/duplicates.cr#L7","def":{"name":"visit","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@nodes.delete(node)\ntrue\n"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/Generator","path":"LibGenerator/Generator.html","kind":"class","full_name":"LibGenerator::Generator","name":"Generator","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/generator/lib.cr","line_number":4,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr"},{"filename":"lib_generator/generator.cr","line_number":4,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[{"id":"generate(library:LibGenerator::Library,definitions:Hash(String,LibGenerator::Definition),transformers:Array(Crystal::Transformer)=[]ofCrystal::Transformer)-class-method","html_id":"generate(library:LibGenerator::Library,definitions:Hash(String,LibGenerator::Definition),transformers:Array(Crystal::Transformer)=[]ofCrystal::Transformer)-class-method","name":"generate","doc":null,"summary":null,"abstract":false,"args":[{"name":"library","doc":null,"default_value":"","external_name":"library","restriction":"LibGenerator::Library"},{"name":"definitions","doc":null,"default_value":"","external_name":"definitions","restriction":"Hash(String, LibGenerator::Definition)"},{"name":"transformers","doc":null,"default_value":"[] of Crystal::Transformer","external_name":"transformers","restriction":"Array(Crystal::Transformer)"}],"args_string":"(library : LibGenerator::Library, definitions : Hash(String, LibGenerator::Definition), transformers : Array(Crystal::Transformer) = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Crystal</span><span class=\"t\">::</span><span class=\"t\">Transformer</span>)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L21","def":{"name":"generate","args":[{"name":"library","doc":null,"default_value":"","external_name":"library","restriction":"LibGenerator::Library"},{"name":"definitions","doc":null,"default_value":"","external_name":"definitions","restriction":"Hash(String, LibGenerator::Definition)"},{"name":"transformers","doc":null,"default_value":"[] of Crystal::Transformer","external_name":"transformers","restriction":"Array(Crystal::Transformer)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(self.new(library, definitions, transformers)).generate"}}],"constructors":[{"id":"new(library:LibGenerator::Library,definitions:Hash(String,LibGenerator::Definition),transformers:Array(Crystal::Transformer)=[]ofCrystal::Transformer)-class-method","html_id":"new(library:LibGenerator::Library,definitions:Hash(String,LibGenerator::Definition),transformers:Array(Crystal::Transformer)=[]ofCrystal::Transformer)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"library","doc":null,"default_value":"","external_name":"library","restriction":"LibGenerator::Library"},{"name":"definitions","doc":null,"default_value":"","external_name":"definitions","restriction":"Hash(String, LibGenerator::Definition)"},{"name":"transformers","doc":null,"default_value":"[] of Crystal::Transformer","external_name":"transformers","restriction":"Array(Crystal::Transformer)"}],"args_string":"(library : LibGenerator::Library, definitions : Hash(String, LibGenerator::Definition), transformers : Array(Crystal::Transformer) = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Crystal</span><span class=\"t\">::</span><span class=\"t\">Transformer</span>)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L10","def":{"name":"new","args":[{"name":"library","doc":null,"default_value":"","external_name":"library","restriction":"LibGenerator::Library"},{"name":"definitions","doc":null,"default_value":"","external_name":"definitions","restriction":"Hash(String, LibGenerator::Definition)"},{"name":"transformers","doc":null,"default_value":"[] of Crystal::Transformer","external_name":"transformers","restriction":"Array(Crystal::Transformer)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(library, definitions, transformers)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"common_filename:String-instance-method","html_id":"common_filename:String-instance-method","name":"common_filename","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L8","def":{"name":"common_filename","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@common_filename"}},{"id":"extract_common_nodes:Array(Crystal::ASTNode)-instance-method","html_id":"extract_common_nodes:Array(Crystal::ASTNode)-instance-method","name":"extract_common_nodes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Crystal::ASTNode)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L52","def":{"name":"extract_common_nodes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Crystal::ASTNode)","visibility":"Public","body":"counter = LibGenerator::NodeCounter.new\n@libs.each do |fn, li|\n  li.ast.accept(LibGenerator::CountVisitor.new(counter))\nend\ncounter.select do |_, c|\n  c > 1\nend.map do |n, _|\n  n\nend\n"}},{"id":"generate:Hash(String,String?)-instance-method","html_id":"generate:Hash(String,String?)-instance-method","name":"generate","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, String?)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L25","def":{"name":"generate","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, String | ::Nil)","visibility":"Public","body":"parse_libs()\ntransform_libs()\ngroup_common_nodes()\ngenerate_libs()\n@libs.map do |fn, li|\n  {fn, li.source}\nend.to_h\n"}},{"id":"generate_libs-instance-method","html_id":"generate_libs-instance-method","name":"generate_libs","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L46","def":{"name":"generate_libs","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@libs.each do |filename, li|\n  li.generate\nend"}},{"id":"group_common_nodes-instance-method","html_id":"group_common_nodes-instance-method","name":"group_common_nodes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L61","def":{"name":"group_common_nodes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"libs = @libs\nif (common_nodes = extract_common_nodes()).empty?\nelse\n  nrt = LibGenerator::RemoveTransformer.new(common_nodes)\n  libs.each do |_, li|\n    li.transform(nrt)\n  end\nend\nif (common_def = libs[@common_filename]?)\n  common_def.ast.accept(LibGenerator::DuplicatesVisitor.new(common_nodes))\n  if common_def.ast.is_a?(Crystal::Expressions)\n  else\n    common_def.ast = Crystal::Expressions.new([common_def.ast])\n  end\n  common_nodes.each do |node|\n    (common_def.ast.as(Crystal::Expressions)).expressions << node\n  end\nelse\n  common_def = libs[@common_filename] = Lib.new(library: @library, definition: LibGenerator::Definition.new(description: \"Common definitions of the #{@library.name} lib\"), ast: Crystal::Expressions.new(common_nodes))\nend\ntransformers = @transformers\ntransformers.each do |tr|\n  if tr.is_a?(LibGenerator::CosmeticTransformer)\n    common_def.transform(tr)\n  end\nend\nrequires = libs.select do |_, v|\n  !(v.ast.as(Crystal::Expressions)).expressions.empty?\nend.keys\ncommon_def.requires.concat(requires.map do |fn|\n  if fn != @common_filename\n    File.join(\".\", fn)\n  end\nend.compact)\nself\n"}},{"id":"library:LibGenerator::Library-instance-method","html_id":"library:LibGenerator::Library-instance-method","name":"library","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : LibGenerator::Library","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L7","def":{"name":"library","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"LibGenerator::Library","visibility":"Public","body":"@library"}},{"id":"libs:Hash(String,Lib)-instance-method","html_id":"libs:Hash(String,Lib)-instance-method","name":"libs","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Lib)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L9","def":{"name":"libs","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, Lib)","visibility":"Public","body":"@libs"}},{"id":"parse_libs-instance-method","html_id":"parse_libs-instance-method","name":"parse_libs","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L34","def":{"name":"parse_libs","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@libs.each do |filename, li|\n  li.parse\nend"}},{"id":"transform_libs-instance-method","html_id":"transform_libs-instance-method","name":"transform_libs","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L40","def":{"name":"transform_libs","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@libs.each do |filename, li|\n  li.transform\nend"}},{"id":"transformers:Array(Crystal::Transformer)-instance-method","html_id":"transformers:Array(Crystal::Transformer)-instance-method","name":"transformers","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Crystal::Transformer)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator.cr#L10","def":{"name":"transformers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Crystal::Transformer)","visibility":"Public","body":"@transformers"}}],"macros":[],"types":[{"html_id":"github.com/olbat/libgen/LibGenerator/Generator/Lib","path":"LibGenerator/Generator/Lib.html","kind":"class","full_name":"LibGenerator::Generator::Lib","name":"Lib","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/generator/lib.cr","line_number":5,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator/Generator","kind":"class","full_name":"LibGenerator::Generator","name":"Generator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(library:LibGenerator::Library,definition:LibGenerator::Definition,transformers=[]ofCrystal::Transformer,requires=[]ofString,ast=nil,source=nil)-class-method","html_id":"new(library:LibGenerator::Library,definition:LibGenerator::Definition,transformers=[]ofCrystal::Transformer,requires=[]ofString,ast=nil,source=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"library","doc":null,"default_value":"","external_name":"library","restriction":"LibGenerator::Library"},{"name":"definition","doc":null,"default_value":"","external_name":"definition","restriction":"LibGenerator::Definition"},{"name":"transformers","doc":null,"default_value":"[] of Crystal::Transformer","external_name":"transformers","restriction":""},{"name":"requires","doc":null,"default_value":"[] of String","external_name":"requires","restriction":""},{"name":"ast","doc":null,"default_value":"nil","external_name":"ast","restriction":""},{"name":"source","doc":null,"default_value":"nil","external_name":"source","restriction":""}],"args_string":"(library : LibGenerator::Library, definition : LibGenerator::Definition, transformers = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Crystal</span><span class=\"t\">::</span><span class=\"t\">Transformer</span>, requires = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, ast = <span class=\"n\">nil</span>, source = <span class=\"n\">nil</span>)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L13","def":{"name":"new","args":[{"name":"library","doc":null,"default_value":"","external_name":"library","restriction":"LibGenerator::Library"},{"name":"definition","doc":null,"default_value":"","external_name":"definition","restriction":"LibGenerator::Definition"},{"name":"transformers","doc":null,"default_value":"[] of Crystal::Transformer","external_name":"transformers","restriction":""},{"name":"requires","doc":null,"default_value":"[] of String","external_name":"requires","restriction":""},{"name":"ast","doc":null,"default_value":"nil","external_name":"ast","restriction":""},{"name":"source","doc":null,"default_value":"nil","external_name":"source","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(library, definition, transformers, requires, ast, source)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"ast-instance-method","html_id":"ast-instance-method","name":"ast","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":null,"def":{"name":"ast","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@ast.not_nil!"}},{"id":"ast=(ast:Crystal::ASTNode)-instance-method","html_id":"ast=(ast:Crystal::ASTNode)-instance-method","name":"ast=","doc":null,"summary":null,"abstract":false,"args":[{"name":"ast","doc":null,"default_value":"","external_name":"ast","restriction":"Crystal::ASTNode"}],"args_string":"(ast : Crystal::ASTNode)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L11","def":{"name":"ast=","args":[{"name":"ast","doc":null,"default_value":"","external_name":"ast","restriction":"Crystal::ASTNode"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@ast = ast"}},{"id":"ast?:Crystal::ASTNode?-instance-method","html_id":"ast?:Crystal::ASTNode?-instance-method","name":"ast?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Crystal::ASTNode?","source_link":null,"def":{"name":"ast?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@ast"}},{"id":"definition:LibGenerator::Definition-instance-method","html_id":"definition:LibGenerator::Definition-instance-method","name":"definition","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : LibGenerator::Definition","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L9","def":{"name":"definition","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"LibGenerator::Definition","visibility":"Public","body":"@definition"}},{"id":"generate:String?-instance-method","html_id":"generate:String?-instance-method","name":"generate","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L38","def":{"name":"generate","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"li = generate_lib()\nrequires = generate_requires()\nif li || requires\n  expressions = [] of Crystal::ASTNode\n  if li\n    generate_link_annotation().try do |attrs|\n      expressions << attrs\n    end\n    expressions << li\n  end\n  if requires\n    expressions << requires\n  end\n  ast = Crystal::Expressions.new(expressions)\n  source = IO::Memory.new\n  ast.to_s(source, emit_doc: true)\n  code = source.to_s\n  begin\n    Crystal::Parser.parse(code)\n  rescue e : Crystal::SyntaxException\n    msg = IO::Memory.new\n    msg << \"transformations are making the code syntaxically incorrect\\n\\n\"\n    e.append_to_s(code, msg)\n    raise(ArgumentError.new(msg.to_s))\n  end\n  @source = Crystal.format(code)\nend\n"}},{"id":"generate_lib:Crystal::LibDef?-instance-method","html_id":"generate_lib:Crystal::LibDef?-instance-method","name":"generate_lib","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Crystal::LibDef?","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L78","def":{"name":"generate_lib","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystal::LibDef | ::Nil","visibility":"Public","body":"ast = @ast\nif (ast.as(Crystal::Expressions)).expressions.empty?\nelse\n  (Crystal::LibDef.new(@library.name, ast)).tap do |ln|\n    ln.doc = @definition.description\n  end\nend\n"}},{"id":"generate_link_annotation:Crystal::Annotation?-instance-method","html_id":"generate_link_annotation:Crystal::Annotation?-instance-method","name":"generate_link_annotation","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Crystal::Annotation?","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L70","def":{"name":"generate_link_annotation","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystal::Annotation | ::Nil","visibility":"Public","body":"if (ldflags = @library.generate_ldflags)\n  Crystal::Annotation.new(Crystal::Path.new([\"Link\"]), named_args: [Crystal::NamedArgument.new(\"ldflags\", Crystal::StringLiteral.new(ldflags))])\nend"}},{"id":"generate_requires:Crystal::Expressions?-instance-method","html_id":"generate_requires:Crystal::Expressions?-instance-method","name":"generate_requires","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Crystal::Expressions?","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L87","def":{"name":"generate_requires","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Crystal::Expressions | ::Nil","visibility":"Public","body":"requires = @requires\nif requires.empty?\nelse\n  Crystal::Expressions.new(requires.map do |fn|\n    (Crystal::Require.new(fn)).as(Crystal::ASTNode)\n  end)\nend\n"}},{"id":"library:LibGenerator::Library-instance-method","html_id":"library:LibGenerator::Library-instance-method","name":"library","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : LibGenerator::Library","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L8","def":{"name":"library","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"LibGenerator::Library","visibility":"Public","body":"@library"}},{"id":"parse-instance-method","html_id":"parse-instance-method","name":"parse","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L16","def":{"name":"parse","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@ast = @definition.parse_lib(@library.generate_cflags)\nself\n"}},{"id":"requires:Array(String)-instance-method","html_id":"requires:Array(String)-instance-method","name":"requires","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L11","def":{"name":"requires","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@requires"}},{"id":"source:String?-instance-method","html_id":"source:String?-instance-method","name":"source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L12","def":{"name":"source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@source"}},{"id":"transform(transformer:Crystal::Transformer)-instance-method","html_id":"transform(transformer:Crystal::Transformer)-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"transformer","doc":null,"default_value":"","external_name":"transformer","restriction":"Crystal::Transformer"}],"args_string":"(transformer : Crystal::Transformer)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L28","def":{"name":"transform","args":[{"name":"transformer","doc":null,"default_value":"","external_name":"transformer","restriction":"Crystal::Transformer"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"ast = @ast.not_nil!\nast = ast.transform(transformer)\nif ast.is_a?(Crystal::Expressions)\nelse\n  ast = Crystal::Expressions.new([ast])\nend\nast.expressions.select! do |n|\n  !n.is_a?(Crystal::Nop)\nend\n@ast = ast\n"}},{"id":"transform-instance-method","html_id":"transform-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L21","def":{"name":"transform","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@transformers.each do |tr|\n  transform(tr)\nend\nself\n"}},{"id":"transformers:Array(Crystal::Transformer)-instance-method","html_id":"transformers:Array(Crystal::Transformer)-instance-method","name":"transformers","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Crystal::Transformer)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/generator/lib.cr#L10","def":{"name":"transformers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Crystal::Transformer)","visibility":"Public","body":"@transformers"}}],"macros":[],"types":[]}]},{"html_id":"github.com/olbat/libgen/LibGenerator/Library","path":"LibGenerator/Library.html","kind":"class","full_name":"LibGenerator::Library","name":"Library","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/library.cr","line_number":4,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node,_dummy:Nil)-class-method","html_id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node,_dummy:Nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"::YAML::Nodes::Node"},{"name":"_dummy","doc":null,"default_value":"","external_name":"_dummy","restriction":"Nil"}],"args_string":"(ctx : YAML::ParseContext, node : YAML::Nodes::Node, _dummy : Nil)","source_link":null,"def":{"name":"new","args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"::YAML::Nodes::Node"},{"name":"_dummy","doc":null,"default_value":"","external_name":"_dummy","restriction":"Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(ctx, node, _dummy)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pc:YAML::ParseContext,n:YAML::Nodes::Node)-class-method","html_id":"new(pc:YAML::ParseContext,n:YAML::Nodes::Node)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pc","doc":null,"default_value":"","external_name":"pc","restriction":"YAML::ParseContext"},{"name":"n","doc":null,"default_value":"","external_name":"n","restriction":"YAML::Nodes::Node"}],"args_string":"(pc : YAML::ParseContext, n : YAML::Nodes::Node)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr#L27","def":{"name":"new","args":[{"name":"pc","doc":null,"default_value":"","external_name":"pc","restriction":"YAML::ParseContext"},{"name":"n","doc":null,"default_value":"","external_name":"n","restriction":"YAML::Nodes::Node"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(previous_def(pc, n)).tap(&.check_attr!)"}},{"id":"new(name:String,ldflags:String,includes=nil,definitions=nil,cflags=nil,packages=nil,destdir=nil,rename=nil)-class-method","html_id":"new(name:String,ldflags:String,includes=nil,definitions=nil,cflags=nil,packages=nil,destdir=nil,rename=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"ldflags","doc":null,"default_value":"","external_name":"ldflags","restriction":"String"},{"name":"includes","doc":null,"default_value":"nil","external_name":"includes","restriction":""},{"name":"definitions","doc":null,"default_value":"nil","external_name":"definitions","restriction":""},{"name":"cflags","doc":null,"default_value":"nil","external_name":"cflags","restriction":""},{"name":"packages","doc":null,"default_value":"nil","external_name":"packages","restriction":""},{"name":"destdir","doc":null,"default_value":"nil","external_name":"destdir","restriction":""},{"name":"rename","doc":null,"default_value":"nil","external_name":"rename","restriction":""}],"args_string":"(name : String, ldflags : String, includes = <span class=\"n\">nil</span>, definitions = <span class=\"n\">nil</span>, cflags = <span class=\"n\">nil</span>, packages = <span class=\"n\">nil</span>, destdir = <span class=\"n\">nil</span>, rename = <span class=\"n\">nil</span>)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr#L36","def":{"name":"new","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"},{"name":"ldflags","doc":null,"default_value":"","external_name":"ldflags","restriction":"String"},{"name":"includes","doc":null,"default_value":"nil","external_name":"includes","restriction":""},{"name":"definitions","doc":null,"default_value":"nil","external_name":"definitions","restriction":""},{"name":"cflags","doc":null,"default_value":"nil","external_name":"cflags","restriction":""},{"name":"packages","doc":null,"default_value":"nil","external_name":"packages","restriction":""},{"name":"destdir","doc":null,"default_value":"nil","external_name":"destdir","restriction":""},{"name":"rename","doc":null,"default_value":"nil","external_name":"rename","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(name, ldflags, includes, definitions, cflags, packages, destdir, rename)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pp:JSON::PullParser)-class-method","html_id":"new(pp:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pp","doc":null,"default_value":"","external_name":"pp","restriction":"JSON::PullParser"}],"args_string":"(pp : JSON::PullParser)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr#L31","def":{"name":"new","args":[{"name":"pp","doc":null,"default_value":"","external_name":"pp","restriction":"JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(pp)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"cflags:String?-instance-method","html_id":"cflags:String?-instance-method","name":"cflags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":null,"def":{"name":"cflags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@cflags"}},{"id":"cflags=(_cflags:String?)-instance-method","html_id":"cflags=(_cflags:String?)-instance-method","name":"cflags=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_cflags","doc":null,"default_value":"","external_name":"_cflags","restriction":"String | ::Nil"}],"args_string":"(_cflags : String?)","source_link":null,"def":{"name":"cflags=","args":[{"name":"_cflags","doc":null,"default_value":"","external_name":"_cflags","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@cflags = _cflags"}},{"id":"definitions:Hash(String,LibGenerator::Definition)?-instance-method","html_id":"definitions:Hash(String,LibGenerator::Definition)?-instance-method","name":"definitions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, LibGenerator::Definition)?","source_link":null,"def":{"name":"definitions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, LibGenerator::Definition) | ::Nil","visibility":"Public","body":"@definitions"}},{"id":"definitions=(_definitions:Hash(String,LibGenerator::Definition)?)-instance-method","html_id":"definitions=(_definitions:Hash(String,LibGenerator::Definition)?)-instance-method","name":"definitions=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_definitions","doc":null,"default_value":"","external_name":"_definitions","restriction":"Hash(String, LibGenerator::Definition) | ::Nil"}],"args_string":"(_definitions : Hash(String, LibGenerator::Definition)?)","source_link":null,"def":{"name":"definitions=","args":[{"name":"_definitions","doc":null,"default_value":"","external_name":"_definitions","restriction":"Hash(String, LibGenerator::Definition) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@definitions = _definitions"}},{"id":"destdir:String-instance-method","html_id":"destdir:String-instance-method","name":"destdir","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr#L46","def":{"name":"destdir","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@destdir || (@destdir = File.join(\"src\", @name.underscore))"}},{"id":"destdir=(_destdir:String?)-instance-method","html_id":"destdir=(_destdir:String?)-instance-method","name":"destdir=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_destdir","doc":null,"default_value":"","external_name":"_destdir","restriction":"String | ::Nil"}],"args_string":"(_destdir : String?)","source_link":null,"def":{"name":"destdir=","args":[{"name":"_destdir","doc":null,"default_value":"","external_name":"_destdir","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@destdir = _destdir"}},{"id":"generate_cflags:String?-instance-method","html_id":"generate_cflags:String?-instance-method","name":"generate_cflags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr#L50","def":{"name":"generate_cflags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"cflags = @cflags\nif (packages = @packages)\n  pcflags = (`command -v pkg-config > /dev/null && pkg-config --cflags #{packages} 2> /dev/null`).strip\n  if pcflags.empty?\n    cflags\n  else\n    if (    cflags.nil? || cflags.empty?)\n      pcflags\n    else\n      if (      cflags.strip == pcflags)\n        pcflags\n      else\n        \"#{pcflags} #{cflags}\"\n      end\n    end\n  end\nelse\n  cflags\nend\n"}},{"id":"generate_ldflags:String-instance-method","html_id":"generate_ldflags:String-instance-method","name":"generate_ldflags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/library.cr#L69","def":{"name":"generate_ldflags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"ldflags = @ldflags\nif (packages = @packages)\n  \"`command -v pkg-config > /dev/null && pkg-config --libs #{packages} 2> /dev/null|| printf %s '#{ldflags}'`\"\nelse\n  ldflags\nend\n"}},{"id":"includes:Array(String)?-instance-method","html_id":"includes:Array(String)?-instance-method","name":"includes","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","source_link":null,"def":{"name":"includes","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@includes"}},{"id":"includes=(_includes:Array(String)?)-instance-method","html_id":"includes=(_includes:Array(String)?)-instance-method","name":"includes=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_includes","doc":null,"default_value":"","external_name":"_includes","restriction":"Array(String) | ::Nil"}],"args_string":"(_includes : Array(String)?)","source_link":null,"def":{"name":"includes=","args":[{"name":"_includes","doc":null,"default_value":"","external_name":"_includes","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@includes = _includes"}},{"id":"ldflags:String-instance-method","html_id":"ldflags:String-instance-method","name":"ldflags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":null,"def":{"name":"ldflags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@ldflags"}},{"id":"ldflags=(_ldflags:String)-instance-method","html_id":"ldflags=(_ldflags:String)-instance-method","name":"ldflags=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_ldflags","doc":null,"default_value":"","external_name":"_ldflags","restriction":"String"}],"args_string":"(_ldflags : String)","source_link":null,"def":{"name":"ldflags=","args":[{"name":"_ldflags","doc":null,"default_value":"","external_name":"_ldflags","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@ldflags = _ldflags"}},{"id":"name:String-instance-method","html_id":"name:String-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":null,"def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@name"}},{"id":"name=(_name:String)-instance-method","html_id":"name=(_name:String)-instance-method","name":"name=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":"String"}],"args_string":"(_name : String)","source_link":null,"def":{"name":"name=","args":[{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@name = _name"}},{"id":"packages:String?-instance-method","html_id":"packages:String?-instance-method","name":"packages","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","source_link":null,"def":{"name":"packages","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@packages"}},{"id":"packages=(_packages:String?)-instance-method","html_id":"packages=(_packages:String?)-instance-method","name":"packages=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_packages","doc":null,"default_value":"","external_name":"_packages","restriction":"String | ::Nil"}],"args_string":"(_packages : String?)","source_link":null,"def":{"name":"packages=","args":[{"name":"_packages","doc":null,"default_value":"","external_name":"_packages","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@packages = _packages"}},{"id":"rename:LibGenerator::RenameTransformer?-instance-method","html_id":"rename:LibGenerator::RenameTransformer?-instance-method","name":"rename","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : LibGenerator::RenameTransformer?","source_link":null,"def":{"name":"rename","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"LibGenerator::RenameTransformer | ::Nil","visibility":"Public","body":"@rename"}},{"id":"rename=(_rename:LibGenerator::RenameTransformer?)-instance-method","html_id":"rename=(_rename:LibGenerator::RenameTransformer?)-instance-method","name":"rename=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_rename","doc":null,"default_value":"","external_name":"_rename","restriction":"LibGenerator::RenameTransformer | ::Nil"}],"args_string":"(_rename : LibGenerator::RenameTransformer?)","source_link":null,"def":{"name":"rename=","args":[{"name":"_rename","doc":null,"default_value":"","external_name":"_rename","restriction":"LibGenerator::RenameTransformer | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@rename = _rename"}},{"id":"to_json(json:JSON::Builder)-instance-method","html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"args_string":"(json : JSON::Builder)","source_link":null,"def":{"name":"to_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"json.object do\n  _name = @name\n  if _name.nil?\n  else\n    json.field(\"name\") do\n      _name.to_json(json)\n    end\n  end\n  _ldflags = @ldflags\n  if _ldflags.nil?\n  else\n    json.field(\"ldflags\") do\n      _ldflags.to_json(json)\n    end\n  end\n  _cflags = @cflags\n  if _cflags.nil?\n  else\n    json.field(\"cflags\") do\n      _cflags.to_json(json)\n    end\n  end\n  _includes = @includes\n  if _includes.nil?\n  else\n    json.field(\"includes\") do\n      _includes.to_json(json)\n    end\n  end\n  _definitions = @definitions\n  if _definitions.nil?\n  else\n    json.field(\"definitions\") do\n      _definitions.to_json(json)\n    end\n  end\n  _packages = @packages\n  if _packages.nil?\n  else\n    json.field(\"packages\") do\n      _packages.to_json(json)\n    end\n  end\n  _destdir = @destdir\n  if _destdir.nil?\n  else\n    json.field(\"destdir\") do\n      _destdir.to_json(json)\n    end\n  end\n  _rename = @rename\n  if _rename.nil?\n  else\n    json.field(\"rename\") do\n      _rename.to_json(json)\n    end\n  end\nend"}},{"id":"to_yaml(__temp_80:YAML::Nodes::Builder)-instance-method","html_id":"to_yaml(__temp_80:YAML::Nodes::Builder)-instance-method","name":"to_yaml","doc":null,"summary":null,"abstract":false,"args":[{"name":"__temp_80","doc":null,"default_value":"","external_name":"__temp_80","restriction":"::YAML::Nodes::Builder"}],"args_string":"(__temp_80 : YAML::Nodes::Builder)","source_link":null,"def":{"name":"to_yaml","args":[{"name":"__temp_80","doc":null,"default_value":"","external_name":"__temp_80","restriction":"::YAML::Nodes::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_80.mapping(reference: self) do\n  _name = @name\n  if _name.nil?\n  else\n    \"name\".to_yaml(__temp_80)\n    _name.to_yaml(__temp_80)\n  end\n  _ldflags = @ldflags\n  if _ldflags.nil?\n  else\n    \"ldflags\".to_yaml(__temp_80)\n    _ldflags.to_yaml(__temp_80)\n  end\n  _cflags = @cflags\n  if _cflags.nil?\n  else\n    \"cflags\".to_yaml(__temp_80)\n    _cflags.to_yaml(__temp_80)\n  end\n  _includes = @includes\n  if _includes.nil?\n  else\n    \"includes\".to_yaml(__temp_80)\n    _includes.to_yaml(__temp_80)\n  end\n  _definitions = @definitions\n  if _definitions.nil?\n  else\n    \"definitions\".to_yaml(__temp_80)\n    _definitions.to_yaml(__temp_80)\n  end\n  _packages = @packages\n  if _packages.nil?\n  else\n    \"packages\".to_yaml(__temp_80)\n    _packages.to_yaml(__temp_80)\n  end\n  _destdir = @destdir\n  if _destdir.nil?\n  else\n    \"destdir\".to_yaml(__temp_80)\n    _destdir.to_yaml(__temp_80)\n  end\n  _rename = @rename\n  if _rename.nil?\n  else\n    \"rename\".to_yaml(__temp_80)\n    _rename.to_yaml(__temp_80)\n  end\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/NodeCounter","path":"LibGenerator/NodeCounter.html","kind":"class","full_name":"LibGenerator::NodeCounter","name":"NodeCounter","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/olbat/libgen/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/node_counter.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/node_counter.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/olbat/libgen/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/node_counter.cr#L9","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"each(*args,**options)-instance-method","html_id":"each(*args,**options)-instance-method","name":"each","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/node_counter.cr#L7","def":{"name":"each","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@counter.each(*args, **options)"}},{"id":"each(*args,**options,&block)-instance-method","html_id":"each(*args,**options,&amp;block)-instance-method","name":"each","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &block)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/node_counter.cr#L7","def":{"name":"each","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@counter.each(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"inc(node:Crystal::ASTNode)-instance-method","html_id":"inc(node:Crystal::ASTNode)-instance-method","name":"inc","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::ASTNode"}],"args_string":"(node : Crystal::ASTNode)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/node_counter.cr#L13","def":{"name":"inc","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::ASTNode"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @counter[node]?\n  __temp_100 = node\n  @counter[__temp_100] = @counter[__temp_100] + 1\nelse\n  @counter[node] = 1\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/RemoveTransformer","path":"LibGenerator/RemoveTransformer.html","kind":"class","full_name":"LibGenerator::RemoveTransformer","name":"RemoveTransformer","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},"ancestors":[{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/transformers/remove.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/remove.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(nodes_to_remove:Array(Crystal::ASTNode))-class-method","html_id":"new(nodes_to_remove:Array(Crystal::ASTNode))-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"nodes_to_remove","doc":null,"default_value":"","external_name":"nodes_to_remove","restriction":"Array(Crystal::ASTNode)"}],"args_string":"(nodes_to_remove : Array(Crystal::ASTNode))","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/remove.cr#L4","def":{"name":"new","args":[{"name":"nodes_to_remove","doc":null,"default_value":"","external_name":"nodes_to_remove","restriction":"Array(Crystal::ASTNode)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(nodes_to_remove)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"after_transform(node:Crystal::Expressions)-instance-method","html_id":"after_transform(node:Crystal::Expressions)-instance-method","name":"after_transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::Expressions"}],"args_string":"(node : Crystal::Expressions)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/remove.cr#L16","def":{"name":"after_transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::Expressions"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"node.expressions.select! do |n|\n  !n.is_a?(Crystal::Nop)\nend"}},{"id":"transform(node:Crystal::FunDef|Crystal::TypeDef|Crystal::CStructOrUnionDef|Crystal::EnumDef|Crystal::Alias|Crystal::ExternalVar|Crystal::Assign)-instance-method","html_id":"transform(node:Crystal::FunDef|Crystal::TypeDef|Crystal::CStructOrUnionDef|Crystal::EnumDef|Crystal::Alias|Crystal::ExternalVar|Crystal::Assign)-instance-method","name":"transform","doc":"def transform(node : Crystal::ASTNode)","summary":"<p>def transform(node : Crystal::ASTNode)</p>","abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::EnumDef | Crystal::Alias | Crystal::ExternalVar | Crystal::Assign"}],"args_string":"(node : Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::EnumDef | Crystal::Alias | Crystal::ExternalVar | Crystal::Assign)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/remove.cr#L8","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::EnumDef | Crystal::Alias | Crystal::ExternalVar | Crystal::Assign"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @nodes_to_remove.includes?(node)\n  Crystal::Nop.new\nelse\n  super(node)\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/RenameTransformer","path":"LibGenerator/RenameTransformer.html","kind":"class","full_name":"LibGenerator::RenameTransformer","name":"RenameTransformer","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},"ancestors":[{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/transformers/rename.cr","line_number":13,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node,_dummy:Nil)-class-method","html_id":"new(ctx:YAML::ParseContext,node:YAML::Nodes::Node,_dummy:Nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"::YAML::Nodes::Node"},{"name":"_dummy","doc":null,"default_value":"","external_name":"_dummy","restriction":"Nil"}],"args_string":"(ctx : YAML::ParseContext, node : YAML::Nodes::Node, _dummy : Nil)","source_link":null,"def":{"name":"new","args":[{"name":"ctx","doc":null,"default_value":"","external_name":"ctx","restriction":"YAML::ParseContext"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"::YAML::Nodes::Node"},{"name":"_dummy","doc":null,"default_value":"","external_name":"_dummy","restriction":"Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(ctx, node, _dummy)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pc:YAML::ParseContext,n:YAML::Nodes::Node)-class-method","html_id":"new(pc:YAML::ParseContext,n:YAML::Nodes::Node)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pc","doc":null,"default_value":"","external_name":"pc","restriction":"YAML::ParseContext"},{"name":"n","doc":null,"default_value":"","external_name":"n","restriction":"YAML::Nodes::Node"}],"args_string":"(pc : YAML::ParseContext, n : YAML::Nodes::Node)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L22","def":{"name":"new","args":[{"name":"pc","doc":null,"default_value":"","external_name":"pc","restriction":"YAML::ParseContext"},{"name":"n","doc":null,"default_value":"","external_name":"n","restriction":"YAML::Nodes::Node"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(previous_def(pc, n)).tap(&.check_attr!)"}},{"id":"new(pp:JSON::PullParser)-class-method","html_id":"new(pp:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pp","doc":null,"default_value":"","external_name":"pp","restriction":"JSON::PullParser"}],"args_string":"(pp : JSON::PullParser)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L26","def":{"name":"new","args":[{"name":"pp","doc":null,"default_value":"","external_name":"pp","restriction":"JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(pp)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(rules:Hash(String,Array(NamedTuple())))-class-method","html_id":"new(rules:Hash(String,Array(NamedTuple())))-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"rules","doc":null,"default_value":"","external_name":"rules","restriction":"Hash(String, Array(NamedTuple(pattern: Regex, replacement: String)))"}],"args_string":"(rules : Hash(String, Array(NamedTuple())))","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L31","def":{"name":"new","args":[{"name":"rules","doc":null,"default_value":"","external_name":"rules","restriction":"Hash(String, Array(NamedTuple(pattern: Regex, replacement: String)))"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(rules)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"match?(type:String,node:Crystal::ASTNode)-instance-method","html_id":"match?(type:String,node:Crystal::ASTNode)-instance-method","name":"match?","doc":null,"summary":null,"abstract":false,"args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":"String"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::ASTNode"}],"args_string":"(type : String, node : Crystal::ASTNode)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L44","def":{"name":"match?","args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":"String"},{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::ASTNode"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(type == \"*\") || (node.class_desc == type)"}},{"id":"rules:Hash(String,Array(NamedTuple()))-instance-method","html_id":"rules:Hash(String,Array(NamedTuple()))-instance-method","name":"rules","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Array(NamedTuple()))","source_link":null,"def":{"name":"rules","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, Array(NamedTuple(pattern: Regex, replacement: String)))","visibility":"Public","body":"@rules"}},{"id":"rules=(_rules:Hash(String,Array(NamedTuple())))-instance-method","html_id":"rules=(_rules:Hash(String,Array(NamedTuple())))-instance-method","name":"rules=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_rules","doc":null,"default_value":"","external_name":"_rules","restriction":"Hash(String, Array(NamedTuple(pattern: Regex, replacement: String)))"}],"args_string":"(_rules : Hash(String, Array(NamedTuple())))","source_link":null,"def":{"name":"rules=","args":[{"name":"_rules","doc":null,"default_value":"","external_name":"_rules","restriction":"Hash(String, Array(NamedTuple(pattern: Regex, replacement: String)))"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@rules = _rules"}},{"id":"to_json(json:JSON::Builder)-instance-method","html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"args_string":"(json : JSON::Builder)","source_link":null,"def":{"name":"to_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"json.object do\n  _rules = @rules\n  if _rules.nil?\n  else\n    json.field(\"rules\") do\n      _rules.to_json(json)\n    end\n  end\nend"}},{"id":"to_yaml(__temp_104:YAML::Nodes::Builder)-instance-method","html_id":"to_yaml(__temp_104:YAML::Nodes::Builder)-instance-method","name":"to_yaml","doc":null,"summary":null,"abstract":false,"args":[{"name":"__temp_104","doc":null,"default_value":"","external_name":"__temp_104","restriction":"::YAML::Nodes::Builder"}],"args_string":"(__temp_104 : YAML::Nodes::Builder)","source_link":null,"def":{"name":"to_yaml","args":[{"name":"__temp_104","doc":null,"default_value":"","external_name":"__temp_104","restriction":"::YAML::Nodes::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_104.mapping(reference: self) do\n  _rules = @rules\n  if _rules.nil?\n  else\n    \"rules\".to_yaml(__temp_104)\n    _rules.to_yaml(__temp_104)\n  end\nend"}},{"id":"transform(node:Crystal::FunDef|Crystal::TypeDef|Crystal::CStructOrUnionDef|Crystal::ExternalVar)-instance-method","html_id":"transform(node:Crystal::FunDef|Crystal::TypeDef|Crystal::CStructOrUnionDef|Crystal::ExternalVar)-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::ExternalVar"}],"args_string":"(node : Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::ExternalVar)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L48","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::FunDef | Crystal::TypeDef | Crystal::CStructOrUnionDef | Crystal::ExternalVar"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@rules.each do |type, rules|\n  rules.each do |rule|\n    if match?(type, node)\n      node.name = node.name.gsub(rule[:pattern], rule[:replacement])\n    end\n  end\nend\nsuper(node)\n"}},{"id":"transform(node:Crystal::EnumDef|Crystal::Alias)-instance-method","html_id":"transform(node:Crystal::EnumDef|Crystal::Alias)-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::EnumDef | Crystal::Alias"}],"args_string":"(node : Crystal::EnumDef | Crystal::Alias)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L59","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::EnumDef | Crystal::Alias"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@rules.each do |type, rules|\n  rules.each do |rule|\n    if match?(type, node)\n      node.name.names = node.name.names.map(&.gsub(rule[:pattern], rule[:replacement]))\n    end\n  end\nend\nsuper(node)\n"}},{"id":"transform(node:Crystal::Arg)-instance-method","html_id":"transform(node:Crystal::Arg)-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::Arg"}],"args_string":"(node : Crystal::Arg)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/rename.cr#L70","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::Arg"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@rules.each do |type, rules|\n  rules.each do |rule|\n    if match?(type, node)\n      node.name = node.name.gsub(rule[:pattern], rule[:replacement])\n      node.external_name = node.name\n    end\n  end\nend\nsuper(node)\n"}}],"macros":[],"types":[]},{"html_id":"github.com/olbat/libgen/LibGenerator/SortTransformer","path":"LibGenerator/SortTransformer.html","kind":"class","full_name":"LibGenerator::SortTransformer","name":"SortTransformer","abstract":false,"superclass":{"html_id":"github.com/olbat/libgen/LibGenerator/CosmeticTransformer","kind":"class","full_name":"LibGenerator::CosmeticTransformer","name":"CosmeticTransformer"},"ancestors":[{"html_id":"github.com/olbat/libgen/LibGenerator/CosmeticTransformer","kind":"class","full_name":"LibGenerator::CosmeticTransformer","name":"CosmeticTransformer"},{"html_id":"github.com/olbat/libgen/Crystal/Transformer","kind":"class","full_name":"Crystal::Transformer","name":"Transformer"},{"html_id":"github.com/olbat/libgen/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/olbat/libgen/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib_generator/transformers/sort.cr","line_number":3,"url":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/sort.cr"}],"repository_name":"github.com/olbat/libgen","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/olbat/libgen/LibGenerator","kind":"module","full_name":"LibGenerator","name":"LibGenerator"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"transform(node:Crystal::Expressions)-instance-method","html_id":"transform(node:Crystal::Expressions)-instance-method","name":"transform","doc":null,"summary":null,"abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::Expressions"}],"args_string":"(node : Crystal::Expressions)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/sort.cr#L4","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::Expressions"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"node.expressions.sort_by!(&.to_s)\nsuper(node)\n"}},{"id":"transform(node:Crystal::CStructOrUnionDef)-instance-method","html_id":"transform(node:Crystal::CStructOrUnionDef)-instance-method","name":"transform","doc":"do not sort union and struct fields","summary":"<p>do not sort union and struct fields</p>","abstract":false,"args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::CStructOrUnionDef"}],"args_string":"(node : Crystal::CStructOrUnionDef)","source_link":"https://github.com/olbat/libgen/blob/8b9d09704ea36b11df378a5c31cab065cf69d451/src/lib_generator/transformers/sort.cr#L10","def":{"name":"transform","args":[{"name":"node","doc":null,"default_value":"","external_name":"node","restriction":"Crystal::CStructOrUnionDef"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"node"}}],"macros":[],"types":[]}]}]}})